<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>پنل کانفیگ V2Ray</title>
<style>
body { font-family: sans-serif; background: #f0f0f0; padding: 20px; }
.container { max-width: 600px; margin: auto; background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1);}
input, select { width: 100%; padding: 8px; margin: 5px 0; border-radius: 5px; border: 1px solid #ccc; }
button { background: #007bff; color: white; padding: 10px 20px; border: none; cursor: pointer; border-radius: 5px; margin-top: 10px;}
pre { background: #eee; padding: 10px; border-radius: 5px; white-space: pre-wrap; }
</style>
</head>
<body>
<div class="container">
<h1>پنل کانفیگ V2Ray/X-UI</h1>

<label>آدرس سرور (IP یا Domain):</label>
<input type="text" id="server" value="example.com">

<label>پورت:</label>
<input type="number" id="port" value="443">

<label>UUID:</label>
<input type="text" id="uuid" value="">

<label>پروتکل:</label>
<select id="protocol">
<option value="vmess">VMess</option>
<option value="vless">VLESS</option>
</select>

<button onclick="generateConfig()">ساخت کانفیگ</button>

<h3>کانفیگ تولید شده:</h3>
<pre id="output"></pre>
<button onclick="downloadConfig()">دانلود کانفیگ</button>
</div>

<script>
function generateUUID() {
  return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
    const r = Math.random()*16|0, v = c=='x'?r:(r&0x3|0x8);
    return v.toString(16);
  });
}

function generateConfig() {
  const server = document.getElementById('server').value;
  const port = document.getElementById('port').value;
  let uuid = document.getElementById('uuid').value;
  if (!uuid) uuid = generateUUID();
  document.getElementById('uuid').value = uuid;
  const protocol = document.getElementById('protocol').value;

  const config = {
    "v": "2",
    "ps": "V2Ray Config",
    "add": server,
    "port": port,
    "id": uuid,
    "aid": "0",
    "net": "ws",
    "type": "none",
    "host": "",
    "path": "/",
    "tls": "tls",
    "protocol": protocol
  };

  document.getElementById('output').innerText = JSON.stringify(config, null, 2);
}

function downloadConfig() {
  const config = document.getElementById('output').innerText;
  if (!config) { alert("ابتدا کانفیگ بسازید"); return; }

  const blob = new Blob([config], {type: 'application/json'});
  const link = document.createElement('a');
  link.href = URL.createObjectURL(blob);
  link.download = 'v2ray_config.json';
  link.click();
}
</script>
</body>
</html>
